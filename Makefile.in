LIBPATH = -L../libpcap/libpcap-0.0.6 \
			-L../lib_`uname -m` \
			-L/usr/local/lib

LIBPCAP = -lpcap
LIBTCL = -ltcl7.4
INCLUDES	= -I/usr/local/include
WARNINGS	= -Wall

CFLAGS	= -g ${INCLUDES} ${WARNINGS}

all:	tcpd2det fix2det flstats

tcpd2det:	tcpd2det.o
	${CC} ${CFLAGS} -o tcpd2det ${LDFLAGS} tcpd2det.o ${LIBPATH} ${LIBPCAP}

fix2det:	fix2det.o
	${CC} ${CFLAGS} -o fix2det ${LDFLAGS} fix2det.o

flstats:		flstats.o
	${CC} ${CFLAGS} -o flstats ${LDFLAGS} flstats.o \
						${LIBPATH} ${LIBTCL} ${LIBPCAP} -lm

flstats.o:	flstats.char flstats.c

flstats.char:	flstats.tcl
	sed 's/\\/\\\\/g' < flstats.tcl | sed 's/"/\\"/g' | \
				sed 's/^/"/' | sed 's/$$/\\n"/' > flstats.char
