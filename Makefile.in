LIBPATH = -L ../libpcap/libpcap-0.0.6 \
			-L /home1/minshall/src/libpcap/libpcap-0.0.6 \
			-L /usr/local/lib

LIBPCAP = -lpcap
LIBTCL = -ltcl7.4
INCLUDES	= -I/usr/local/include
WARNINGS	= -Wall

CFLAGS	= -g ${INCLUDES} ${WARNINGS}

all:	tcpd2det fix2det flowsim

tcpd2det:	tcpd2det.o
	${CC} ${CFLAGS} -o tcpd2det ${LDFLAGS} tcpd2det.o ${LIBPATH} ${LIBPCAP}

fix2det:	fix2det.o
	${CC} ${CFLAGS} -o fix2det ${LDFLAGS} fix2det.o

flowsim:		flowsim.o
	${CC} ${CFLAGS} -o flowsim ${LDFLAGS} flowsim.o \
						${LIBPATH} ${LIBTCL} ${LIBPCAP} -lm

flowsim.o:	flowsim.char flowsim.c

flowsim.char:	flowsim.tcl
	sed 's/\\/\\\\/g' < flowsim.tcl | sed 's/"/\\"/g' | \
				sed 's/^/"/' | sed 's/$$/\\n"/' > flowsim.char
